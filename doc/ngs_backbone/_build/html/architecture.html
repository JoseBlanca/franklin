

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Architecture &mdash; ngs_backbone v0.1 documentation</title>
    <link rel="stylesheet" href="_static/agogo.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="ngs_backbone v0.1 documentation" href="index.html" />
    <link rel="next" title="Download" href="download.html" />
    <link rel="prev" title="seq_io" href="seqio.html" /> 
  </head>
  <body>
    <div class="header-wrapper">
      <div class="header">
        <h1><a href="index.html">ngs_backbone v0.1 documentation</a></h1>
        <div class="rel">
          <a href="seqio.html" title="seq_io"
             accesskey="P">previous</a> |
          <a href="download.html" title="Download"
             accesskey="N">next</a> |
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a>
        </div>
       </div>
    </div>

    <div class="content-wrapper">
      <div class="content">
        <div class="document">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="architecture">
<h1>Architecture<a class="headerlink" href="#architecture" title="Permalink to this headline">¶</a></h1>
<p>This section is intended to be read by python developers interested in fixing bugs or extending the functionality of ngs_backbone. A standard user does not need to read it.</p>
<p>The ngs_backbone functionality depends heavily on Biopython and on some external tools, these are the foundations that ngs_backbone requires to do its work. The functions and classes provided by franklin itself are collected in two main packages: franklin and backbone.</p>
<img alt="_images/franklin_architecture.png" src="_images/franklin_architecture.png" />
<dl class="docutils">
<dt>The package franklin provides the required functions to do the different analysis. The backbone package (located in franklin/backbone) is used to build the user interface to the application. For instance in the cleaning analysis:</dt>
<dd><ul class="first last simple">
<li>the backbone will look at the configuration file, it will look for the input and output paths,</li>
<li>and the franklin package has the functions that read the files, clean the sequence objects (using several external applications), and write the output sequences.</li>
</ul>
</dd>
</dl>
<div class="section" id="franklin-package-architecture">
<h2>franklin package architecture<a class="headerlink" href="#franklin-package-architecture" title="Permalink to this headline">¶</a></h2>
<p>In franklin all the analyses are done on sequences so the main class is SeqWithQuality (franklin/seq/seqs.py). SeqWithQuality is just a Biopython SeqRecord with some modifications. These SeqWithQuality sequences when a sequence file is read by the function seqs_in_file (franklin/seq/readers.py). Once the analysis is completed the resulting sequence is written to the output by a writer class named SequenceWriter (franklin/seq/writer.py).</p>
<img alt="_images/pipeline.png" src="_images/pipeline.png" />
<p>An analysis is represented by a pipeline composed by several steps. All the analyses are run by the same function: seq_pipeline_runner (franklin/pipelines/pipelines.py). This function creates a list of analysis steps and a configuration for them and runs them. Each step is composed by a function and a configuration. These analysis step functions are classified in three types: mappers, filters and bulk mappers. The mapper and filter take a SeqWithQuality as input and generate either a new SeqWithQuality (the mapper) or a boolean (the filter). The bulk mappers take a stream of SeqWithQuality sequences and return a new streams.</p>
<p>The analysis steps are entries in a python dictionary that define the analysis function, the kind of function and the description of the analysis. These analysis steps are defined in several modules in the fraklin/pipelines package like seq_pipeline_steps.py (sequence cleaning), annotation_steps.py (sequence annotation) and snv_pipeline_steps.py (snv calling and filtering).</p>
<p>franklin is designed to deal with millions of sequences. Since most of the analysis performed can be done for each sequence independently only once sequence is keep in memory at each time. This is accomplished by using python generators, the sequence streams are in fact a python generator that yield one SeqWithQuality at a time. The function seqs_in_file is the main of such generators.</p>
</div>
</div>


          </div>
        </div>
      </div>
        </div>
        <div class="sidebar">
          <h3>Table Of Contents</h3>
          <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html#third-party-software">Third party software</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html#usage">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html#naming-conventions">Naming conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html#available-analyses">Available analyses</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html#parallel-operation">Parallel operation</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="cleaning.html">Cleaning sequence reads</a></li>
<li class="toctree-l1"><a class="reference internal" href="assembly.html">Mira assembly</a></li>
<li class="toctree-l1"><a class="reference internal" href="mapping.html">Mapping</a></li>
<li class="toctree-l1"><a class="reference internal" href="mapping.html#bam-realignment">Bam realignment</a></li>
<li class="toctree-l1"><a class="reference internal" href="annotation.html">Annotation</a></li>
<li class="toctree-l1"><a class="reference internal" href="snv_filters.html">Snv filters</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="seqio.html">seq_io</a></li>
<li class="toctree-l1"><a class="reference internal" href="seqio.html#seqio-supported-formats">Seqio supported formats</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Architecture</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#franklin-package-architecture">franklin package architecture</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="download.html">Download</a></li>
</ul>

          <h3 style="margin-top: 1.5em;">Search</h3>
          <form class="search" action="search.html" method="get">
            <input type="text" name="q" size="18" />
            <input type="submit" value="Go" />
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
          </form>
          <p class="searchtip" style="font-size: 90%">
            Enter search terms or a module, class or function name.
          </p>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

    <div class="footer-wrapper">
      <div class="footer">
        <div class="left">
          <a href="seqio.html" title="seq_io"
             >previous</a> |
          <a href="download.html" title="Download"
             >next</a> |
          <a href="genindex.html" title="General Index"
             >index</a>
            <br/>
            <a href="_sources/architecture.txt"
               rel="nofollow">Show Source</a>
        </div>

        <div class="right">
          
    <div class="footer">
        &copy; Copyright 2010, Jose Blanca.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

  </body>
</html>